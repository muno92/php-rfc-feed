<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: rfc:num_available_processors</title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="rfc,num_available_processors"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="PHP Wiki"/>
<link rel="start" href="/"/>
<link rel="contents" href="/rfc/num_available_processors?do=index" title="Sitemap"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/feed.php?mode=list&amp;ns=rfc"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/_export/xhtml/rfc/num_available_processors"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/_export/raw/rfc/num_available_processors"/>
<link rel="canonical" href="https://wiki.php.net/rfc/num_available_processors"/>
<link rel="stylesheet" href="/lib/exe/css.php?t=phpnet&amp;tseed=7bd2b78bb5550d8ceb3c825c96dd22d0"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='rfc';var JSINFO = {"id":"rfc:num_available_processors","namespace":"rfc","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script src="/lib/exe/jquery.php?tseed=f0349b609f9b91a485af8fd8ecd4aea4" defer="defer">/*<![CDATA[*/
/*!]]>*/</script>
<script src="/lib/exe/js.php?t=phpnet&amp;tseed=7bd2b78bb5550d8ceb3c825c96dd22d0" defer="defer">/*<![CDATA[*/
/*!]]>*/</script>
<!--<![endif]-->
  <link media='all' rel='stylesheet' href='//shared.php.net/styles/defaults.css?filemtime=1732659606'/>
  <link media='all' rel='stylesheet' href='//shared.php.net/styles/wiki.css?filemtime=1707322306'/>

  <link href="//fonts.googleapis.com/css?family=Fira+Sans|Source+Sans+Pro:300,400,600,400italic,600italic|Source+Code+Pro&amp;subset=latin,latin-ext" rel="stylesheet">
  <link rel="shortcut icon" href="//php.net/favicon.ico">
<!--[if lt IE 9]>
  <script src="//shared.php.net/js/html5shiv.js"></script>
<![endif]-->
  </head>
<body id="">

<div class="wrap">
<header class='clearfix'>
  <div id="mainmenu-toggle-overlay"></div>
  <input type="checkbox" id="mainmenu-toggle">
  <nav class="fullscreen">
    <div class="mainscreen">
      <a href="/" class="home"><img src="//php.net/images/logo.php?" width="48" height="24" alt="php"><span class="subdomain"></span></a>
      <ul>
        <li class=""><a href="?do=login">Login</a></li>
        <li class=""><a href="?do=register">Register</a></li>
      </ul>
    </div>
    <div class="secondscreen">
      <form method="get" action="/start">
        <input type="search" placeholder="Search" name="id" class="search">
        <input type="hidden" name="do" value="search">
      </form>
    </div>
  </nav>
</header>
<div id="flash-message"></div>
<nav id="megadropdown"></nav>

<section class="fullscreen clearfix">


<section id="breadcrumbs">
<nav>
<span class="bchead">You are here: </span><span class="home"><bdi><a href="/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> › <bdi><a href="/rfc" class="wikilink1" title="rfc" data-wiki-id="rfc">rfc</a></bdi> › <bdi><a href="/rfc/num_available_processors" class="wikilink1" title="rfc:num_available_processors" data-wiki-id="rfc:num_available_processors">num_available_processors</a></bdi></nav>
</section>
<section class="mainscreen">
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_phpnet     ">


        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>rfc:num_available_processors</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                                        
<h1 class="sectionedit1" id="php_rfcnum_available_processors">PHP RFC: num_available_processors</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Version: 0.1</div>
</li>
<li class="level1"><div class="li"> Date: 2025-05-18</div>
</li>
<li class="level1"><div class="li"> Author: Daniel Kesselberg, mail@danielkesselberg.de</div>
</li>
<li class="level1"><div class="li"> Status: Under Discussion</div>
</li>
<li class="level1"><div class="li"> First Published at: <a href="https://wiki.php.net/rfc/num_available_processors" class="urlextern" title="https://wiki.php.net/rfc/num_available_processors" rel="ugc nofollow">https://wiki.php.net/rfc/num_available_processors</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
The number of available processors is valuable for tools like php-cs-fixer, enabling parallel execution, or when used with semaphores to manage the concurrent execution of resource-intensive tasks. The new num_available_processors function simplifies getting the number of logical processors across various operating systems.
</p>

</div>

<h2 class="sectionedit3" id="proposal">Proposal</h2>
<div class="level2">

<p>
This <abbr title="Request for Comments">RFC</abbr> proposes the addition of a new function that retrieves the number of available processors:
</p>

<p>
<code class="code php"><span class="kw2">function</span> num_available_processors<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">:</span> ?int</code>
</p>
<ul>
<li class="level1"><div class="li"> The initial version of this proposal used nproc as the function name, inspired by the idea of adding a similar functionality to PHP. However, the current implementation is simpler than nproc, and to avoid potential differences in behavior, I prefer not to use nproc.</div>
</li>
<li class="level1"><div class="li"> The current name in the related PR is num_cpus, inspired by the rust crate num_cpus (<a href="https://docs.rs/num_cpus/latest/num_cpus/" class="urlextern" title="https://docs.rs/num_cpus/latest/num_cpus/" rel="ugc nofollow">https://docs.rs/num_cpus/latest/num_cpus/</a>). However, it could be argued that num_cpus should return the number of physical CPUs, whereas the current implementation returns the number of available processing units.</div>
</li>
<li class="level1"><div class="li"> A popular package for php, to obtain the number of processors, uses the name cpu-core-counter.</div>
</li>
<li class="level1"><div class="li"> Therefore, I suggest using num_available_processors as the function name. However, I don&#039;t have a strong preference on this matter.</div>
</li>
</ul>

</div>

<h2 class="sectionedit4" id="backward_incompatible_changes">Backward Incompatible Changes</h2>
<div class="level2">

<p>
None.
</p>

</div>

<h2 class="sectionedit5" id="proposed_php_version_s">Proposed PHP Version(s)</h2>
<div class="level2">

<p>
Next PHP 8.x
</p>

</div>

<h2 class="sectionedit6" id="rfc_impact">RFC Impact</h2>
<div class="level2">

<p>
This <abbr title="Request for Comments">RFC</abbr> introduces a new function, which might affect existing userland extensions if developers have already created helper functions with the same name. Since the proposed function has a clear and meaningful name, any custom functions should ideally do the same thing and be easy to replace.
</p>

<p>
There is no impact on SAPIs or the opcache.
</p>

</div>

<h2 class="sectionedit7" id="future_scope">Future Scope</h2>
<div class="level2">

<p>
There has already been some discussion on the GitHub pull request. While not currently proposed, a valuable addition could be the introduction of a class such as ReflectionServer or, <abbr title="Operating System">OS</abbr> (similar to Node.js, <a href="https://nodejs.org/api/os.html" class="urlextern" title="https://nodejs.org/api/os.html" rel="ugc nofollow">https://nodejs.org/api/os.html</a>) to provide information about the underlying system. Existing functions like sys_getloadavg or php_uname could be integrated into this class.
</p>

</div>

<h2 class="sectionedit8" id="proposed_voting_choices">Proposed Voting Choices</h2>
<div class="level2">

<p>
Include these so readers know where you are heading and can discuss the proposed voting options.
</p>

</div>

<h2 class="sectionedit9" id="patches_and_tests">Patches and Tests</h2>
<div class="level2">

<p>
<a href="https://github.com/php/php-src/pull/11137" class="urlextern" title="https://github.com/php/php-src/pull/11137" rel="ugc nofollow">https://github.com/php/php-src/pull/11137</a>
</p>

</div>

<h2 class="sectionedit10" id="implementation">Implementation</h2>
<div class="level2">

<p>
After the project is implemented, this section should contain
</p>
<ol>
<li class="level1"><div class="li"> the version(s) it was merged into</div>
</li>
<li class="level1"><div class="li"> a link to the git commit(s)</div>
</li>
<li class="level1"><div class="li"> a link to the PHP manual entry for the feature</div>
</li>
<li class="level1"><div class="li"> a link to the language specification section (if any)</div>
</li>
</ol>

</div>

<h2 class="sectionedit11" id="references">References</h2>
<div class="level2">

<p>
Links to external references, discussions or RFCs
</p>

</div>

<h2 class="sectionedit12" id="rejected_features">Rejected Features</h2>
<div class="level2">

<p>
Keep this updated with features that were discussed on the mail lists.
</p>

</div>
                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>rfc/num_available_processors.txt</bdi> · Last modified: 2025/05/24 17:36 by <bdi>kesselb</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="/rfc/num_available_processors?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="/rfc/num_available_processors?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="/rfc/num_available_processors?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

    </div></div><!-- /site -->

    <div class="no"><img src="/lib/exe/taskrunner.php?id=rfc%3Anum_available_processors&amp;1749905165" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</section>

﻿<section class="secondscreen">
  <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#php_rfcnum_available_processors">PHP RFC: num_available_processors</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#introduction">Introduction</a></div></li>
<li class="level2"><div class="li"><a href="#proposal">Proposal</a></div></li>
<li class="level2"><div class="li"><a href="#backward_incompatible_changes">Backward Incompatible Changes</a></div></li>
<li class="level2"><div class="li"><a href="#proposed_php_version_s">Proposed PHP Version(s)</a></div></li>
<li class="level2"><div class="li"><a href="#rfc_impact">RFC Impact</a></div></li>
<li class="level2"><div class="li"><a href="#future_scope">Future Scope</a></div></li>
<li class="level2"><div class="li"><a href="#proposed_voting_choices">Proposed Voting Choices</a></div></li>
<li class="level2"><div class="li"><a href="#patches_and_tests">Patches and Tests</a></div></li>
<li class="level2"><div class="li"><a href="#implementation">Implementation</a></div></li>
<li class="level2"><div class="li"><a href="#references">References</a></div></li>
<li class="level2"><div class="li"><a href="#rejected_features">Rejected Features</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</section>
</section><!-- .fullscreen -->
<footer>
  <nav class="fullscreen">
    <ul>
      <li><a href="//php.net/copyright">Copyright © 2001-2025 The PHP Group</a></li>
      <li><a href="//php.net/sites">Other PHP.net sites</a></li>
      <li><a href="//php.net/privacy">Privacy policy</a></li>
    </ul>
  </nav>
</footer>

</div><!-- .wrap -->
</body>
</html>
