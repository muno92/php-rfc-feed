<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>PHP: rfc:property_write_visibility</title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="keywords" content="rfc,property_write_visibility"/>
<link rel="search" type="application/opensearchdescription+xml" href="/lib/exe/opensearch.php" title="PHP Wiki"/>
<link rel="start" href="/"/>
<link rel="contents" href="/rfc/property_write_visibility?do=index" title="Sitemap"/>
<link rel="manifest" href="/lib/exe/manifest.php"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="/feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current namespace" href="/feed.php?mode=list&amp;ns=rfc"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="/_export/xhtml/rfc/property_write_visibility"/>
<link rel="alternate" type="text/plain" title="Wiki Markup" href="/_export/raw/rfc/property_write_visibility"/>
<link rel="canonical" href="https://wiki.php.net/rfc/property_write_visibility"/>
<link rel="stylesheet" href="/lib/exe/css.php?t=phpnet&amp;tseed=7bd2b78bb5550d8ceb3c825c96dd22d0"/>
<!--[if gte IE 9]><!-->
<script >/*<![CDATA[*/var NS='rfc';var JSINFO = {"id":"rfc:property_write_visibility","namespace":"rfc","ACT":"show","useHeadingNavigation":0,"useHeadingContent":0};
/*!]]>*/</script>
<script src="/lib/exe/jquery.php?tseed=f0349b609f9b91a485af8fd8ecd4aea4" defer="defer">/*<![CDATA[*/
/*!]]>*/</script>
<script src="/lib/exe/js.php?t=phpnet&amp;tseed=7bd2b78bb5550d8ceb3c825c96dd22d0" defer="defer">/*<![CDATA[*/
/*!]]>*/</script>
<!--<![endif]-->
  <link media='all' rel='stylesheet' href='//shared.php.net/styles/defaults.css?filemtime=1732659606'/>
  <link media='all' rel='stylesheet' href='//shared.php.net/styles/wiki.css?filemtime=1707322306'/>

  <link href="//fonts.googleapis.com/css?family=Fira+Sans|Source+Sans+Pro:300,400,600,400italic,600italic|Source+Code+Pro&amp;subset=latin,latin-ext" rel="stylesheet">
  <link rel="shortcut icon" href="//php.net/favicon.ico">
<!--[if lt IE 9]>
  <script src="//shared.php.net/js/html5shiv.js"></script>
<![endif]-->
  </head>
<body id="">

<div class="wrap">
<header class='clearfix'>
  <div id="mainmenu-toggle-overlay"></div>
  <input type="checkbox" id="mainmenu-toggle">
  <nav class="fullscreen">
    <div class="mainscreen">
      <a href="/" class="home"><img src="//php.net/images/logo.php?" width="48" height="24" alt="php"><span class="subdomain"></span></a>
      <ul>
        <li class=""><a href="?do=login">Login</a></li>
        <li class=""><a href="?do=register">Register</a></li>
      </ul>
    </div>
    <div class="secondscreen">
      <form method="get" action="/start">
        <input type="search" placeholder="Search" name="id" class="search">
        <input type="hidden" name="do" value="search">
      </form>
    </div>
  </nav>
</header>
<div id="flash-message"></div>
<nav id="megadropdown"></nav>

<section class="fullscreen clearfix">


<section id="breadcrumbs">
<nav>
<span class="bchead">You are here: </span><span class="home"><bdi><a href="/start" class="wikilink1" title="start" data-wiki-id="start">start</a></bdi></span> › <bdi><a href="/rfc" class="wikilink1" title="rfc" data-wiki-id="rfc">rfc</a></bdi> › <bdi><a href="/rfc/property_write_visibility" class="wikilink1" title="rfc:property_write_visibility" data-wiki-id="rfc:property_write_visibility">property_write_visibility</a></bdi></nav>
</section>
<section class="mainscreen">
    <!--[if lte IE 7 ]><div id="IE7"><![endif]--><!--[if IE 8 ]><div id="IE8"><![endif]-->
    <div id="dokuwiki__site"><div id="dokuwiki__top" class="site dokuwiki mode_show tpl_phpnet     ">


        <div class="wrapper group">

            
            <!-- ********** CONTENT ********** -->
            <div id="dokuwiki__content"><div class="pad group">

                <div class="pageId"><span>rfc:property_write_visibility</span></div>

                <div class="page group">
                                                            <!-- wikipage start -->
                                        
<h1 class="sectionedit1" id="php_rfcproperty_writeset_visibility">PHP RFC: Property write/set visibility</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> Version: 0.4.6</div>
</li>
<li class="level1"><div class="li"> Date: 2020-06-29</div>
</li>
<li class="level1"><div class="li"> Author: André Rømcke <a href="mailto:&#97;&#110;&#100;&#114;&#101;&#46;&#114;&#111;&#109;&#99;&#107;&#101;&#43;&#112;&#104;&#112;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;" class="mail" title="&#97;&#110;&#100;&#114;&#101;&#46;&#114;&#111;&#109;&#99;&#107;&#101;&#43;&#112;&#104;&#112;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;">&#97;&#110;&#100;&#114;&#101;&#46;&#114;&#111;&#109;&#99;&#107;&#101;&#43;&#112;&#104;&#112;&#64;&#103;&#109;&#97;&#105;&#108;&#46;&#99;&#111;&#109;</a></div>
</li>
<li class="level1"><div class="li"> Proposed PHP version: PHP 8.1</div>
</li>
<li class="level1"><div class="li"> Status: Obsolete</div>
</li>
<li class="level1"><div class="li"> First Published at: <a href="http://wiki.php.net/rfc/readonly_and_immutable_properties" class="urlextern" title="http://wiki.php.net/rfc/readonly_and_immutable_properties" rel="ugc nofollow">http://wiki.php.net/rfc/readonly_and_immutable_properties</a></div>
</li>
<li class="level1"><div class="li"> Discussion: <a href="https://externals.io/message/110768" class="urlextern" title="https://externals.io/message/110768" rel="ugc nofollow">https://externals.io/message/110768</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit2" id="introduction">Introduction</h2>
<div class="level2">

<p>
With the introduction of <a href="/rfc/typed_properties_v2" class="wikilink1" title="rfc:typed_properties_v2" data-wiki-id="rfc:typed_properties_v2">typed properties</a> in PHP 7.4, properties have become far more powerful. However there are still common scenarios where you&#039;ll need to use magic methods or methods for properties in order to deal with disconnected write/set vs read/get visibility for properties, like readonly, writeonly or immutable <em>like</em> semantic. This requires unnecessary boilerplate, makes usage less ergonomic and in the case of magic methods hurts performance.
</p>

<p>
This <abbr title="Request for Comments">RFC</abbr> resolves this issue by proposing to allow classes to optionally declare property write/set visibility, disconnected from read/get visibility.
</p>

<p>
Under this <abbr title="Request for Comments">RFC</abbr>, code like the following using magic methods:
</p>
<pre class="code php"><span class="co4">/**
 * @property-read int $id
 * @property-read string $name
 */</span>
<span class="kw2">class</span> User <span class="br0">&#123;</span>
    <span class="kw2">private</span> int <span class="re0">$id</span><span class="sy0">;</span>
    <span class="kw2">protected</span> string <span class="re0">$name</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>int <span class="re0">$id</span><span class="sy0">,</span> string <span class="re0">$name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">id</span> <span class="sy0">=</span> <span class="re0">$id</span><span class="sy0">;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">name</span> <span class="sy0">=</span> <span class="re0">$name</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __get<span class="br0">&#40;</span><span class="re0">$property</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>property_exists<span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">,</span> <span class="re0">$property</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="co1">// We return value here as non public properties are &quot;readonly&quot; in this class</span>
            <span class="kw1">return</span> <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="re0">$property</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">throw</span> <span class="kw2">new</span> PropertyNotFoundException<span class="br0">&#40;</span><span class="re0">$property</span><span class="sy0">,</span> static<span class="sy0">::</span><span class="kw2">class</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __set<span class="br0">&#40;</span><span class="re0">$property</span><span class="sy0">,</span> <span class="re0">$value</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">if</span> <span class="br0">&#40;</span>property_exists<span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">,</span> <span class="re0">$property</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            <span class="co1">// Here private/protected property is attempted accessed outside allowed scope, so we throw</span>
            <span class="kw1">throw</span> <span class="kw2">new</span> PropertyReadOnlyException<span class="br0">&#40;</span><span class="re0">$property</span><span class="sy0">,</span> static<span class="sy0">::</span><span class="kw2">class</span><span class="br0">&#41;</span><span class="sy0">;</span>
        <span class="br0">&#125;</span>
        <span class="kw1">throw</span> <span class="kw2">new</span> PropertyNotFoundException<span class="br0">&#40;</span><span class="re0">$property</span><span class="sy0">,</span> static<span class="sy0">::</span><span class="kw2">class</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __isset<span class="br0">&#40;</span><span class="re0">$property</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="kw1">return</span> property_exists<span class="br0">&#40;</span><span class="re0">$this</span><span class="sy0">,</span> <span class="re0">$property</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __unset<span class="br0">&#40;</span><span class="re0">$property</span><span class="br0">&#41;</span>
    <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span>__set<span class="br0">&#40;</span><span class="re0">$property</span><span class="sy0">,</span> <span class="kw4">null</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
might be written as <em>(Language syntax Option A)</em>:
</p>
<pre class="code php"><span class="kw2">class</span> User <span class="br0">&#123;</span>
    <span class="kw2">public</span><span class="sy0">:</span><span class="kw2">private</span> int <span class="re0">$id</span><span class="sy0">;</span>
    <span class="kw2">public</span><span class="sy0">:</span><span class="kw2">protected</span> string <span class="re0">$name</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>int <span class="re0">$id</span><span class="sy0">,</span> string <span class="re0">$name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">id</span> <span class="sy0">=</span> <span class="re0">$id</span><span class="sy0">;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">name</span> <span class="sy0">=</span> <span class="re0">$name</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
or <em>(Language Syntax Option B)</em>:
</p>
<pre class="code php"><span class="kw2">class</span> User <span class="br0">&#123;</span>
    <span class="kw2">public</span> <span class="kw2">private</span><span class="br0">&#40;</span>set<span class="br0">&#41;</span> int <span class="re0">$id</span><span class="sy0">;</span>
    <span class="kw2">public</span> <span class="kw2">protected</span><span class="br0">&#40;</span>set<span class="br0">&#41;</span> string <span class="re0">$name</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>int <span class="re0">$id</span><span class="sy0">,</span> string <span class="re0">$name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">id</span> <span class="sy0">=</span> <span class="re0">$id</span><span class="sy0">;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">name</span> <span class="sy0">=</span> <span class="re0">$name</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

</div>

<h2 class="sectionedit3" id="main_differences_to_previous_proposals">Main differences to previous proposals</h2>
<div class="level2">

<p>
This <abbr title="Request for Comments">RFC</abbr> is inspired by what was proposed on internals mailing list in “<abbr title="Request for Comments">RFC</abbr> Proposal - Attributes read/write visibility” by Amaury Bouchard, on 15 July 2012. And the syntax and semantics found in <a href="https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html#ID18" class="urlextern" title="https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html#ID18" rel="ugc nofollow">Swift</a>.
</p>

<p>
In both cases the purpose is to provide for a wider set of use cases.
</p>

</div>

<h3 class="sectionedit4" id="readonly">Readonly</h3>
<div class="level3">

<p>
This <abbr title="Request for Comments">RFC</abbr> allows for among others semantics proposed in <a href="/rfc/readonly_properties" class="wikilink1" title="rfc:readonly_properties" data-wiki-id="rfc:readonly_properties">Readonly properties</a> (2014, Withdrawn), by setting read/get as <code>public</code> and write/set as <code>protected</code>.
</p>

<p>
This <abbr title="Request for Comments">RFC</abbr> does however <strong>not</strong> introduce any native readonly keyword/attribute which would be more readable, however this provides the underlying language concepts needed for introducing a Readonly attribute later.
</p>

</div>

<h3 class="sectionedit5" id="immutability">Immutability</h3>
<div class="level3">

<p>
This <abbr title="Request for Comments">RFC</abbr> allows to <em>simulate</em> what was proposed in <a href="/rfc/immutability" class="wikilink1" title="rfc:immutability" data-wiki-id="rfc:immutability">Immutability</a> (2018, Stale), by setting read/get as <code>public</code> and write/set as <code>private</code>.
</p>

<p>
This <abbr title="Request for Comments">RFC</abbr> does however <strong>not</strong> introduce any immutable knowhow in the language which JIT can optimize for, however the features here can be built upon for a native immutable keyword/attribute in the future.
</p>

</div>

<h3 class="sectionedit6" id="write_once">Write once</h3>
<div class="level3">

<p>
This <abbr title="Request for Comments">RFC</abbr> does <em class="u">not</em> align with the semantics of the recent <a href="/rfc/write_once_properties" class="wikilink1" title="rfc:write_once_properties" data-wiki-id="rfc:write_once_properties">Write once properties</a> (2020, Declined), which is targeting a different problem.
</p>

</div>

<h3 class="sectionedit7" id="property_accessors_syntax">Property Accessors Syntax</h3>
<div class="level3">

<p>
This <abbr title="Request for Comments">RFC</abbr> does not try to solve as wide use case as the different iterations of <a href="/rfc/propertygetsetsyntax-v1.2" class="wikilink1" title="rfc:propertygetsetsyntax-v1.2" data-wiki-id="rfc:propertygetsetsyntax-v1.2">Property Accessors Syntax</a> (2012, Declined) does.
</p>

<p>
However what being proposed here is aligned to make sure Accessors can cleanly be added later.
</p>

</div>

<h2 class="sectionedit8" id="proposal">Proposal</h2>
<div class="level2">

<p>
This proposal adds support for enforced write/set visibility checks for declared properties. 
</p>

</div>

<h3 class="sectionedit9" id="language_syntax_apublicprivate">Language syntax A: &quot;public:private&quot;</h3>
<div class="level3">

<p>
The following example illustrates the basic syntax:
</p>
<pre class="code php"><span class="kw2">class</span> User <span class="br0">&#123;</span>
    <span class="co1">// Property is readonly in protected and public scope</span>
    <span class="kw2">public</span><span class="sy0">:</span><span class="kw2">private</span> int <span class="re0">$id</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Property is readonly in public scope</span>
    <span class="kw2">public</span><span class="sy0">:</span><span class="kw2">protected</span> string <span class="re0">$name</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Property is write-only in public and protected scope</span>
    <span class="kw2">private</span><span class="sy0">:</span><span class="kw2">public</span> string <span class="re0">$newPassword</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>int <span class="re0">$id</span><span class="sy0">,</span> string <span class="re0">$name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">id</span> <span class="sy0">=</span> <span class="re0">$id</span><span class="sy0">;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">name</span> <span class="sy0">=</span> <span class="re0">$name</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
The format is <code>&lt;get_visibility&gt;:&lt;set_visibility&gt;</code>, and if you omit the last visibility value you will like before implicit set both read and write visibility at once.
</p>

</div>

<h3 class="sectionedit10" id="language_syntax_bprivate_set">Language syntax B: &quot;private(set)&quot;</h3>
<div class="level3">

<p>
The following example illustrates the basic syntax:
</p>
<pre class="code php"><span class="kw2">class</span> User <span class="br0">&#123;</span>
    <span class="co1">// Property is readonly in protected and public scope</span>
    <span class="kw2">public</span> <span class="kw2">private</span><span class="br0">&#40;</span>set<span class="br0">&#41;</span> int <span class="re0">$id</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Property is readonly in public scope</span>
    <span class="kw2">public</span> <span class="kw2">protected</span><span class="br0">&#40;</span>set<span class="br0">&#41;</span> string <span class="re0">$name</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// Property is write-only in public and protected scope</span>
    <span class="kw2">private</span> <span class="kw2">public</span><span class="br0">&#40;</span>set<span class="br0">&#41;</span> string <span class="re0">$newPassword</span><span class="sy0">;</span>
&nbsp;
    <span class="kw2">public</span> <span class="kw2">function</span> __construct<span class="br0">&#40;</span>int <span class="re0">$id</span><span class="sy0">,</span> string <span class="re0">$name</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">id</span> <span class="sy0">=</span> <span class="re0">$id</span><span class="sy0">;</span>
        <span class="re0">$this</span><span class="sy0">-&gt;</span><span class="me1">name</span> <span class="sy0">=</span> <span class="re0">$name</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
The format in this option is taken from <a href="https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html#ID18" class="urlextern" title="https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html#ID18" rel="ugc nofollow">Swift</a>, and is perhaps more readable in terms of intent. It also aligns nicely with vocabulary of future Accessors proposal.
</p>

<p>
Like in the other syntax proposal, if set visibility is not specified, as before the global visibility will define both read/get and write/set visibility.
</p>

</div>

<h3 class="sectionedit11" id="references">References</h3>
<div class="level3">

<p>
Attempting to pass a property value outside of allowed writable scope as a reference, results in an error.
</p>

</div>

<h3 class="sectionedit12" id="reflection">Reflection</h3>
<div class="level3">

<p>
When using reflection, methods such as <code>ReflectionProperty::setAccessible()</code> will work as before, it will implicit set visibility for both read/get and write/set.
</p>

<p>
In order to avoid backwards compatibility issue, the following methods will get updated behavior:
</p>
<ul>
<li class="level1"><div class="li"> <code>ReflectionProperty::isPrivate()</code> - Checks if property is private <strong>for get and set visibility, or one of them</strong></div>
</li>
<li class="level1"><div class="li"> <code>ReflectionProperty::isProtected()</code> - Checks if property is protected <strong>for get and set visibility, or one of them with the remaining being public</strong></div>
</li>
<li class="level1"><div class="li"> <code>ReflectionProperty::isPublic()</code> - Checks if property is public <strong>for get and set visibility</strong></div>
</li>
</ul>

<p>
The following methods needs to be added to detect different read vs write visibility: 
</p>
<ul>
<li class="level1"><div class="li"> <code>ReflectionProperty::isSetPrivate()</code> - Checks if property is writable in private</div>
</li>
<li class="level1"><div class="li"> <code>ReflectionProperty::isSetProtected()</code> - Checks if property is writable in protected</div>
</li>
<li class="level1"><div class="li"> <code>ReflectionProperty::isSetPublic()</code> - Checks if property is writable in public</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> <code>ReflectionProperty::isGetPrivate()</code> - Checks if property is readable in private</div>
</li>
<li class="level1"><div class="li"> <code>ReflectionProperty::isGetProtected()</code> - Checks if property is readable in protected</div>
</li>
<li class="level1"><div class="li"> <code>ReflectionProperty::isGetPublic()</code> - Checks if property is readable in public</div>
</li>
</ul>

<p>
<em>TODO: <code>Reflection::getModifiers()</code> and <code>Reflection::getModifierNames()</code> will need adaption too</em>
</p>

</div>

<h2 class="sectionedit13" id="discussions">Discussions</h2>
<div class="level2">

</div>

<h3 class="sectionedit14" id="language_syntax">Language Syntax</h3>
<div class="level3">

<p>
The format options being proposed here are open for discussion, and additional proposal can be made on internals list.
</p>

<p>
Plain “public private $var” was on purpose skipped as it is less readable and could easily cause issues for <code>Reflection::getModifierNames()</code>.
</p>

</div>

<h3 class="sectionedit15" id="why_not_a_readonly_keywordattribute">Why not a Readonly keyword/attribute</h3>
<div class="level3">

<p>
Several comments are pointing out that <code>readonly</code>, <code>writeonly</code>, <code>immutable</code> keywords/attributes would be more readable, and this is true. However what is proposed here is made in such a way that for instance a <code>Readonly</code> attribute can be introduced more easily in the future.
</p>

<p>
AS in, if the language don&#039;t have a concept for write/set property visibility, then we&#039;ll end up with having to introduce reflection api that are tied in to the keyword/attribute introduced instead, as opposed to the underlying concept.
</p>

</div>

<h2 class="sectionedit16" id="backward_incompatible_changes">Backward Incompatible Changes</h2>
<div class="level2">

<p>
Code that acts on Reflection to check for visibility, <em>should</em> be adapted to take advantage of the more fine grained read or write visibility check methods.
</p>

</div>

<h2 class="sectionedit17" id="proposed_php_version_s">Proposed PHP Version(s)</h2>
<div class="level2">

<p>
Next PHP version, 8.1 suggested.
</p>

</div>

<h2 class="sectionedit18" id="impact_on_extensions">Impact on extensions</h2>
<div class="level2">

<p>
More future extension code, and possible SPL code, can be written in PHP instead. This is in-line with other features already accepted for PHP 8.0.
</p>

<p>
Besides that existing PHP extensions working with visibility on properties will need to be adapted.
</p>

</div>

<h2 class="sectionedit19" id="performance">Performance</h2>
<div class="level2">

<p>
<em>Performance tests will need to be done once there is an implementation of this. Both for overhead on properties, as well as measuring benefit over using magic methods.</em>
</p>

</div>

<h2 class="sectionedit20" id="vote">Vote</h2>
<div class="level2">

<p>
As this is a language change, a 2/3 majority is required.
</p>

</div>

<h2 class="sectionedit21" id="references1">References</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html#ID18" class="urlextern" title="https://docs.swift.org/swift-book/LanguageGuide/AccessControl.html#ID18" rel="ugc nofollow">Swift setter access level</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/classes#readonly-fields" class="urlextern" title="https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/classes#readonly-fields" rel="ugc nofollow">C# readonly fields</a>, semantically similar to what is referred to as “immutable” here.</div>
</li>
<li class="level1"><div class="li"> <a href="https://docs.rs/readonly/0.1.6/readonly/" class="urlextern" title="https://docs.rs/readonly/0.1.6/readonly/" rel="ugc nofollow">Rust readonly create</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit22" id="errata">Errata</h2>
<div class="level2">

<p>
<em>If there are any edge-cases found during implementation, they will appear here.</em>
</p>

</div>

<h2 class="sectionedit23" id="changelog">Changelog</h2>
<div class="level2">

<p>
Significant changes to the <abbr title="Request for Comments">RFC</abbr> are noted here.
</p>
<ul>
<li class="level1"><div class="li"> 2020-06-29 Adapt for initial feedback, add syntax proposal aligned with Swift</div>
</li>
<li class="level1"><div class="li"> 2020-06-28 Simplify Reflection <abbr title="Application Programming Interface">API</abbr> proposal, add syntax alternatives for discussion</div>
</li>
<li class="level1"><div class="li"> 2020-06-25 Focus on write visibility proposal</div>
</li>
<li class="level1"><div class="li"> 2020-06-20 Initial early draft to get feedback on direction between visibility, readonly/immutable keywords or attributes</div>
</li>
</ul>

</div>
                    <!-- wikipage stop -->
                                    </div>

                <div class="docInfo"><bdi>rfc/property_write_visibility.txt</bdi> · Last modified: 2025/04/03 13:08 by <bdi>127.0.0.1</bdi></div>

                            </div></div><!-- /content -->

            <hr class="a11y" />

            <!-- PAGE ACTIONS -->
            <div id="dokuwiki__pagetools">
                <h3 class="a11y">Page Tools</h3>
                <div class="tools">
                    <ul>
                        <li><a href="/rfc/property_write_visibility?do=edit"  class="action source" accesskey="v" rel="nofollow" title="Show pagesource [V]"><span>Show pagesource</span></a></li><li><a href="/rfc/property_write_visibility?do=revisions"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]"><span>Old revisions</span></a></li><li><a href="/rfc/property_write_visibility?do=backlink"  class="action backlink" rel="nofollow" title="Backlinks"><span>Backlinks</span></a></li><li><a href="#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]"><span>Back to top</span></a></li>                    </ul>
                </div>
            </div>
        </div><!-- /wrapper -->

    </div></div><!-- /site -->

    <div class="no"><img src="/lib/exe/taskrunner.php?id=rfc%3Aproperty_write_visibility&amp;1749905254" width="2" height="1" alt="" /></div>
    <div id="screen__mode" class="no"></div>    <!--[if ( lte IE 7 | IE 8 ) ]></div><![endif]-->
</section>

﻿<section class="secondscreen">
  <!-- TOC START -->
<div id="dw__toc" class="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="#php_rfcproperty_writeset_visibility">PHP RFC: Property write/set visibility</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="#introduction">Introduction</a></div></li>
<li class="level2"><div class="li"><a href="#main_differences_to_previous_proposals">Main differences to previous proposals</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#readonly">Readonly</a></div></li>
<li class="level3"><div class="li"><a href="#immutability">Immutability</a></div></li>
<li class="level3"><div class="li"><a href="#write_once">Write once</a></div></li>
<li class="level3"><div class="li"><a href="#property_accessors_syntax">Property Accessors Syntax</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#proposal">Proposal</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#language_syntax_apublicprivate">Language syntax A: &quot;public:private&quot;</a></div></li>
<li class="level3"><div class="li"><a href="#language_syntax_bprivate_set">Language syntax B: &quot;private(set)&quot;</a></div></li>
<li class="level3"><div class="li"><a href="#references">References</a></div></li>
<li class="level3"><div class="li"><a href="#reflection">Reflection</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#discussions">Discussions</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="#language_syntax">Language Syntax</a></div></li>
<li class="level3"><div class="li"><a href="#why_not_a_readonly_keywordattribute">Why not a Readonly keyword/attribute</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="#backward_incompatible_changes">Backward Incompatible Changes</a></div></li>
<li class="level2"><div class="li"><a href="#proposed_php_version_s">Proposed PHP Version(s)</a></div></li>
<li class="level2"><div class="li"><a href="#impact_on_extensions">Impact on extensions</a></div></li>
<li class="level2"><div class="li"><a href="#performance">Performance</a></div></li>
<li class="level2"><div class="li"><a href="#vote">Vote</a></div></li>
<li class="level2"><div class="li"><a href="#references1">References</a></div></li>
<li class="level2"><div class="li"><a href="#errata">Errata</a></div></li>
<li class="level2"><div class="li"><a href="#changelog">Changelog</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</section>
</section><!-- .fullscreen -->
<footer>
  <nav class="fullscreen">
    <ul>
      <li><a href="//php.net/copyright">Copyright © 2001-2025 The PHP Group</a></li>
      <li><a href="//php.net/sites">Other PHP.net sites</a></li>
      <li><a href="//php.net/privacy">Privacy policy</a></li>
    </ul>
  </nav>
</footer>

</div><!-- .wrap -->
</body>
</html>
